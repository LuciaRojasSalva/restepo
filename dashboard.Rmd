---
title: "Registro Nacional de Denuncias de Delitos y Faltas 2017"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
runtime: shiny
---
  
```{r setup, include=FALSE}
library(flexdashboard)
library(readr)
library(ggplot2)
library(dplyr)
library(lubridate)
library(haven)
```


```{r}
#Cargamos la base de datos desde el repositorio
cap100<-read_sav("D:/BD_varias/RENADEF 2017/100.sav")
cap200<-read_sav("D:/BD_varias/RENADEF 2017/200.sav")
cap300<-read_sav("D:/BD_varias/RENADEF 2017/300.sav")

#Realizamos el merge de los tres módulos
crimen<-merge(cap200,cap300,by = intersect(names(cap200), names(cap300)))
names(crimen)[4]<-"UBIGEO"
crimen1<-merge(cap100,crimen,by="UBIGEO")

```

Introducción
===================================================================

  
Column {.sidebar data-width=400}
-----------------------------------------------------------------------
  
### Chart A
  
```{r}

```

Column {data-width=350}
-----------------------------------------------------------------------
  
### Chart B
  
```{r}
  selectizeInput("Departamento", label = "Departamento:",
          choices =unique(crimen1[c("NOMBREDD.y")]),selected = "Amazonas")

  selectizeInput("Provincia", label = "Provincia:",
          choices=NULL,options = list(maxOptions = 1000000))
  
 selectizeInput("Distrito", label = "Distrito:",
          choices=NULL,options = list(maxOptions = 1000000))

observeEvent(input$Departamento,
      updateSelectizeInput(session,"Provincia","Provincia",choices=crimen1$NOMBREPP.y[crimen1$NOMBREDD.y==input$Departamento], server = TRUE))

observeEvent(input$Provincia,
      updateSelectizeInput(session,"Distrito","Distrito",choices=crimen1$NOMBREDI.y[crimen1$NOMBREPP.y==input$Provincia & crimen1$NOMBREDD.y==input$Departamento], server = TRUE))

```

### Chart C

```{r}

```

Detalles 1 {data-navmenu="Info"}
===================================================================
  
### Chart D
  
```{r}

```


Detalles 2 {data-navmenu="Info"}
===================================================================
  
### Chart E
  
```{r}

```